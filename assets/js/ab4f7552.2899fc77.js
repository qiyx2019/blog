"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3773],{3905:function(e,r,n){n.d(r,{Zo:function(){return c},kt:function(){return u}});var t=n(7294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function l(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?l(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function i(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},l=Object.keys(e);for(t=0;t<l.length;t++)n=l[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=t.createContext({}),p=function(e){var r=t.useContext(s),n=r;return e&&(n="function"==typeof e?e(r):a(a({},r),e)),n},c=function(e){var r=p(e.components);return t.createElement(s.Provider,{value:r},e.children)},b={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},m=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,l=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=p(n),u=o,f=m["".concat(s,".").concat(u)]||m[u]||b[u]||l;return n?t.createElement(f,a(a({ref:r},c),{},{components:n})):t.createElement(f,a({ref:r},c))}));function u(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var l=n.length,a=new Array(l);a[0]=m;var i={};for(var s in r)hasOwnProperty.call(r,s)&&(i[s]=r[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,a[1]=i;for(var p=2;p<l;p++)a[p]=n[p];return t.createElement.apply(null,a)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5087:function(e,r,n){n.r(r),n.d(r,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return m}});var t=n(7462),o=n(3366),l=(n(7294),n(3905)),a=["components"],i={},s="forkJoin",p={unversionedId:"rx/combination/forkjoin",id:"rx/combination/forkjoin",title:"forkJoin",description:"\u51fd\u6570\u7b7e\u540d function): Observable",source:"@site/docs/rx/combination/forkjoin.md",sourceDirName:"rx/combination",slug:"/rx/combination/forkjoin",permalink:"/blog/docs/rx/combination/forkjoin",tags:[],version:"current",frontMatter:{},sidebar:"rx",previous:{title:"concatAll",permalink:"/blog/docs/rx/combination/concatall"},next:{title:"merge",permalink:"/blog/docs/rx/combination/merge"}},c=[{value:"\u51fd\u6570\u7b7e\u540d: <code>forkJoin(...args, selector : function): Observable</code>",id:"\u51fd\u6570\u7b7e\u540d-forkjoinargs-selector--function-observable",children:[],level:4},{value:"\u5f53\u6240\u6709 observables \u5b8c\u6210\u65f6\uff0c\u53d1\u51fa\u6bcf\u4e2a observable \u7684\u6700\u65b0\u503c\u3002",id:"\u5f53\u6240\u6709-observables-\u5b8c\u6210\u65f6\u53d1\u51fa\u6bcf\u4e2a-observable-\u7684\u6700\u65b0\u503c",children:[{value:"\u4e3a\u4ec0\u4e48\u4f7f\u7528 <code>forkJoin</code>\uff1f",id:"\u4e3a\u4ec0\u4e48\u4f7f\u7528-forkjoin",children:[],level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",children:[{value:"\u793a\u4f8b 1: Observables \u518d\u4e0d\u540c\u7684\u65f6\u95f4\u95f4\u9694\u540e\u5b8c\u6210",id:"\u793a\u4f8b-1-observables-\u518d\u4e0d\u540c\u7684\u65f6\u95f4\u95f4\u9694\u540e\u5b8c\u6210",children:[],level:5},{value:"\u793a\u4f8b 2: \u53d1\u8d77\u4efb\u610f\u591a\u4e2a\u8bf7\u6c42",id:"\u793a\u4f8b-2-\u53d1\u8d77\u4efb\u610f\u591a\u4e2a\u8bf7\u6c42",children:[],level:5},{value:"\u793a\u4f8b 3: \u5728\u5916\u90e8\u5904\u7406\u9519\u8bef",id:"\u793a\u4f8b-3-\u5728\u5916\u90e8\u5904\u7406\u9519\u8bef",children:[],level:5},{value:"\u793a\u4f8b 4: \u5f53\u67d0\u4e2a\u5185\u90e8 observable \u62a5\u9519\u65f6\u5f97\u5230\u6210\u529f\u7ed3\u679c",id:"\u793a\u4f8b-4-\u5f53\u67d0\u4e2a\u5185\u90e8-observable-\u62a5\u9519\u65f6\u5f97\u5230\u6210\u529f\u7ed3\u679c",children:[],level:5},{value:"\u793a\u4f8b 5: Angular \u4e2d\u7684 forkJoin",id:"\u793a\u4f8b-5-angular-\u4e2d\u7684-forkjoin",children:[],level:5}],level:3},{value:"\u5176\u4ed6\u8d44\u6e90",id:"\u5176\u4ed6\u8d44\u6e90",children:[],level:3}],level:2}],b={toc:c};function m(e){var r=e.components,n=(0,o.Z)(e,a);return(0,l.kt)("wrapper",(0,t.Z)({},b,n,{components:r,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"forkjoin"},"forkJoin"),(0,l.kt)("h4",{id:"\u51fd\u6570\u7b7e\u540d-forkjoinargs-selector--function-observable"},"\u51fd\u6570\u7b7e\u540d: ",(0,l.kt)("inlineCode",{parentName:"h4"},"forkJoin(...args, selector : function): Observable")),(0,l.kt)("h2",{id:"\u5f53\u6240\u6709-observables-\u5b8c\u6210\u65f6\u53d1\u51fa\u6bcf\u4e2a-observable-\u7684\u6700\u65b0\u503c"},"\u5f53\u6240\u6709 observables \u5b8c\u6210\u65f6\uff0c\u53d1\u51fa\u6bcf\u4e2a observable \u7684\u6700\u65b0\u503c\u3002"),(0,l.kt)("hr",null),(0,l.kt)("p",null,"\ud83d\udca1  \u5982\u679c\u4f60\u60f3\u8981\u591a\u4e2a observables \u6309\u53d1\u51fa\u987a\u5e8f\u76f8\u5bf9\u5e94\u7684\u503c\u7684\u7ec4\u5408\uff0c\u8bd5\u8bd5 ",(0,l.kt)("a",{parentName:"p",href:"/blog/docs/rx/combination/zip"},"zip"),"\uff01"),(0,l.kt)("p",null,"\u26a0\ufe0f \u5982\u679c\u5185\u90e8 observable \u4e0d\u5b8c\u6210\u7684\u8bdd\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"forkJoin")," \u6c38\u8fdc\u4e0d\u4f1a\u53d1\u51fa\u503c\uff01"),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"\u4e3a\u4ec0\u4e48\u4f7f\u7528-forkjoin"},"\u4e3a\u4ec0\u4e48\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"h3"},"forkJoin"),"\uff1f"),(0,l.kt)("p",null,"\u5f53\u6709\u4e00\u7ec4 observables\uff0c\u4f46\u4f60\u53ea\u5173\u5fc3\u6bcf\u4e2a observable \u6700\u540e\u53d1\u51fa\u7684\u503c\u65f6\uff0c\u6b64\u64cd\u4f5c\u7b26\u662f\u6700\u9002\u5408\u7684\u3002\u6b64\u64cd\u4f5c\u7b26\u7684\u4e00\u4e2a\u5e38\u89c1\u7528\u4f8b\u662f\u5728\u9875\u9762\u52a0\u8f7d(\u6216\u5176\u4ed6\u4e8b\u4ef6)\u65f6\u4f60\u5e0c\u671b\u53d1\u8d77\u591a\u4e2a\u8bf7\u6c42\uff0c\u5e76\u5728\u6240\u6709\u8bf7\u6c42\u90fd\u54cd\u5e94\u540e\u518d\u91c7\u53d6\u884c\u52a8\u3002\u5b83\u53ef\u80fd\u4e0e ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"},(0,l.kt)("inlineCode",{parentName:"a"},"Promise.all"))," \u7684\u4f7f\u7528\u65b9\u5f0f\u7c7b\u4f3c\u3002"),(0,l.kt)("p",null,"\u6ce8\u610f\uff0c\u5982\u679c\u4efb\u610f\u4f5c\u7528\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"forkJoin")," \u7684\u5185\u90e8 observable \u62a5\u9519\u7684\u8bdd\uff0c\u5bf9\u4e8e\u90a3\u4e9b\u5728\u5185\u90e8 observable \u4e0a\u6ca1\u6709\u6b63\u786e ",(0,l.kt)("a",{parentName:"p",href:"/blog/docs/rx/error_handling/catch"},(0,l.kt)("inlineCode",{parentName:"a"},"catch"))," \u9519\u8bef\uff0c\u4ece\u800c\u5bfc\u81f4\u5b8c\u6210\u7684 observable\uff0c\u4f60\u5c06\u4e22\u5931\u5b83\u4eec\u7684\u503c (\u53c2\u89c1\u793a\u4f8b 4)\u3002\u5982\u679c\u4f60\u53ea\u5173\u5fc3\u6240\u6709\u5185\u90e8 observables \u662f\u5426\u6210\u529f\u5b8c\u6210\u7684\u8bdd\uff0c\u53ef\u4ee5",(0,l.kt)("a",{parentName:"p",href:"#%E5%9C%A8%E5%A4%96%E9%83%A8%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF"},"\u5728\u5916\u90e8\u6355\u83b7\u9519\u8bef"),"\u3002"),(0,l.kt)("p",null,"\u8fd8\u9700\u8981\u6ce8\u610f\u7684\u662f\u5982\u679c observable \u53d1\u51fa\u7684\u9879\u591a\u4e8e\u4e00\u4e2a\u7684\u8bdd\uff0c\u5e76\u4e14\u4f60\u53ea\u5173\u5fc3\u524d\u4e00\u4e2a\u53d1\u51fa\u7684\u8bdd\uff0c\u90a3\u4e48 ",(0,l.kt)("inlineCode",{parentName:"p"},"forkJoin")," \u5e76\u975e\u6b63\u786e\u7684\u9009\u62e9\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5e94\u8be5\u9009\u62e9\u50cf ",(0,l.kt)("a",{parentName:"p",href:"/blog/docs/rx/combination/combinelatest"},"combineLatest")," \u6216 ",(0,l.kt)("a",{parentName:"p",href:"/blog/docs/rx/combination/zip"},"zip")," \u8fd9\u6837\u7684\u64cd\u4f5c\u7b26\u3002"),(0,l.kt)("div",{class:"ua-ad"},(0,l.kt)("a",{href:"https://ultimateangular.com/?ref=76683_kee7y7vk"},(0,l.kt)("img",{src:"https://ultimateangular.com/assets/img/banners/ua-leader.svg"}))),(0,l.kt)("h3",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),(0,l.kt)("h5",{id:"\u793a\u4f8b-1-observables-\u518d\u4e0d\u540c\u7684\u65f6\u95f4\u95f4\u9694\u540e\u5b8c\u6210"},"\u793a\u4f8b 1: Observables \u518d\u4e0d\u540c\u7684\u65f6\u95f4\u95f4\u9694\u540e\u5b8c\u6210"),(0,l.kt)("p",null,"(\n",(0,l.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/typescript-bqxg9x?file=index.ts&devtoolsheight=100"},"StackBlitz"),"\n| ",(0,l.kt)("a",{parentName:"p",href:"http://jsbin.com/remiduhimu/1/edit?js,console"},"jsBin")," |\n",(0,l.kt)("a",{parentName:"p",href:"https://jsfiddle.net/btroncone/5fj77920/81/"},"jsFiddle")," )"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// RxJS v6+\nimport { delay, take } from 'rxjs/operators';\nimport { forkJoin, of, interval } from 'rxjs';\n\nconst myPromise = val =>\n  new Promise(resolve =>\n    setTimeout(() => resolve(`Promise Resolved: ${val}`), 5000)\n  );\n\n/*\n  \u5f53\u6240\u6709 observables \u5b8c\u6210\u65f6\uff0c\u5c06\u6bcf\u4e2a observable \n  \u7684\u6700\u65b0\u503c\u4f5c\u4e3a\u6570\u7ec4\u53d1\u51fa\n*/\nconst example = forkJoin(\n  // \u7acb\u5373\u53d1\u51fa 'Hello'\n  of('Hello'),\n  // 1\u79d2\u540e\u53d1\u51fa 'World'\n  of('World').pipe(delay(1000)),\n  // 1\u79d2\u540e\u53d1\u51fa0\n  interval(1000).pipe(take(1)),\n  // \u4ee51\u79d2\u7684\u65f6\u95f4\u95f4\u9694\u53d1\u51fa0\u548c1\n  interval(1000).pipe(take(2)),\n  // 5\u79d2\u540e\u89e3\u6790 'Promise Resolved' \u7684 promise\n  myPromise('RESULT')\n);\n//\u8f93\u51fa: [\"Hello\", \"World\", 0, 1, \"Promise Resolved: RESULT\"]\nconst subscribe = example.subscribe(val => console.log(val));\n")),(0,l.kt)("h5",{id:"\u793a\u4f8b-2-\u53d1\u8d77\u4efb\u610f\u591a\u4e2a\u8bf7\u6c42"},"\u793a\u4f8b 2: \u53d1\u8d77\u4efb\u610f\u591a\u4e2a\u8bf7\u6c42"),(0,l.kt)("p",null,"(\n",(0,l.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/typescript-3mbbjw?file=index.ts&devtoolsheight=100"},"StackBlitz"),"\n| ",(0,l.kt)("a",{parentName:"p",href:"http://jsbin.com/febejakapi/1/edit?js,console"},"jsBin")," |\n",(0,l.kt)("a",{parentName:"p",href:"https://jsfiddle.net/btroncone/0b8Lnh7s/1/"},"jsFiddle")," )"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'// RxJS v6+\nimport { mergeMap } from \'rxjs/operators\';\nimport { forkJoin, of } from \'rxjs\';\n\nconst myPromise = val =>\n  new Promise(resolve =>\n    setTimeout(() => resolve(`Promise Resolved: ${val}`), 5000)\n  );\n\nconst source = of([1, 2, 3, 4, 5]);\n// \u53d1\u51fa\u6570\u7ec4\u7684\u5168\u90e85\u4e2a\u7ed3\u679c\nconst example = source.pipe(mergeMap(q => forkJoin(...q.map(myPromise))));\n/*\n  \u8f93\u51fa:\n  [\n   "Promise Resolved: 1",\n   "Promise Resolved: 2",\n   "Promise Resolved: 3",\n   "Promise Resolved: 4",\n   "Promise Resolved: 5"\n  ]\n*/\nconst subscribe = example.subscribe(val => console.log(val));\n')),(0,l.kt)("h5",{id:"\u793a\u4f8b-3-\u5728\u5916\u90e8\u5904\u7406\u9519\u8bef"},"\u793a\u4f8b 3: \u5728\u5916\u90e8\u5904\u7406\u9519\u8bef"),(0,l.kt)("p",null,"(\n",(0,l.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/typescript-xgskpm?file=index.ts&devtoolsheight=100"},"StackBlitz"),"\n| ",(0,l.kt)("a",{parentName:"p",href:"http://jsbin.com/gugawucixi/1/edit?js,console"},"jsBin")," |\n",(0,l.kt)("a",{parentName:"p",href:"https://jsfiddle.net/btroncone/6vz7tjx2/1/"},"jsFiddle")," )"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// RxJS v6+\nimport { delay, catchError } from 'rxjs/operators';\nimport { forkJoin, of, throwError } from 'rxjs';\n\n/*\n  \u5f53\u6240\u6709 observables \u5b8c\u6210\u65f6\uff0c\u5c06\u6bcf\u4e2a observable \n  \u7684\u6700\u65b0\u503c\u4f5c\u4e3a\u6570\u7ec4\u53d1\u51fa\n*/\nconst example = forkJoin(\n  // \u7acb\u5373\u53d1\u51fa 'Hello'\n  of('Hello'),\n  // 1\u79d2\u540e\u53d1\u51fa 'World'\n  of('World').pipe(delay(1000)),\n  // \u629b\u51fa\u9519\u8bef\n  _throw('This will error')\n).pipe(catchError(error => of(error)));\n// \u8f93\u51fa: 'This will Error'\nconst subscribe = example.subscribe(val => console.log(val));\n")),(0,l.kt)("h5",{id:"\u793a\u4f8b-4-\u5f53\u67d0\u4e2a\u5185\u90e8-observable-\u62a5\u9519\u65f6\u5f97\u5230\u6210\u529f\u7ed3\u679c"},"\u793a\u4f8b 4: \u5f53\u67d0\u4e2a\u5185\u90e8 observable \u62a5\u9519\u65f6\u5f97\u5230\u6210\u529f\u7ed3\u679c"),(0,l.kt)("p",null,"(\n",(0,l.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/typescript-hydgiu?file=index.ts&devtoolsheight=100"},"StackBlitz"),"\n| ",(0,l.kt)("a",{parentName:"p",href:"http://jsbin.com/memajepefe/1/edit?js,console"},"jsBin")," |\n",(0,l.kt)("a",{parentName:"p",href:"https://jsfiddle.net/btroncone/emdu4doy/1/"},"jsFiddle")," )"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// RxJS v6+\nimport { delay, catchError } from 'rxjs/operators';\nimport { forkJoin, of, throwError } from 'rxjs';\n\n/*\n  \u5f53\u6240\u6709 observables \u5b8c\u6210\u65f6\uff0c\u5c06\u6bcf\u4e2a observable \n  \u7684\u6700\u65b0\u503c\u4f5c\u4e3a\u6570\u7ec4\u53d1\u51fa\n*/\nconst example = forkJoin(\n  // \u7acb\u5373\u53d1\u51fa 'Hello'\n  of('Hello'),\n  // 1\u79d2\u540e\u53d1\u51fa 'World'\n  of('World').pipe(delay(1000)),\n  // \u629b\u51fa\u9519\u8bef\n  _throw('This will error').pipe(catchError(error => of(error)))\n);\n// \u8f93\u51fa: [\"Hello\", \"World\", \"This will error\"]\nconst subscribe = example.subscribe(val => console.log(val));\n")),(0,l.kt)("h5",{id:"\u793a\u4f8b-5-angular-\u4e2d\u7684-forkjoin"},"\u793a\u4f8b 5: Angular \u4e2d\u7684 forkJoin"),(0,l.kt)("p",null,"( ",(0,l.kt)("a",{parentName:"p",href:"https://plnkr.co/edit/ElTrOg8NfR3WbbAfjBXQ?p=preview"},"plunker")," )"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"@Injectable()\nexport class MyService {\n  makeRequest(value: string, delayDuration: number) {\n    // \u6a21\u62df http \u8bf7\u6c42\n    return of(`Complete: ${value}`).pipe(\n      delay(delayDuration)\n    );\n  }\n}\n\n@Component({\n  selector: 'my-app',\n  template: `\n    <div>\n      <h2>forkJoin Example</h2>\n      <ul>\n        <li> {{propOne}} </li>\n        <li> {{propTwo}} </li>\n        <li> {{propThree}} </li>\n      </ul>\n    </div>\n  `,\n})\nexport class App {\n  public propOne: string;\n  public propTwo: string;\n  public propThree: string;\n  constructor(private _myService: MyService) {}\n\n  ngOnInit() {\n    // \u4f7f\u7528\u4e0d\u540c\u7684\u5ef6\u8fdf\u6a21\u62df3\u4e2a\u8bf7\u6c42\n    forkJoin(\n      this._myService.makeRequest('Request One', 2000),\n      this._myService.makeRequest('Request Two', 1000),\n      this._myService.makeRequest('Request Three', 3000)\n    )\n    .subscribe(([res1, res2, res3]) => {\n      this.propOne = res1;\n      this.propTwo = res2;\n      this.propThree = res3;\n    });\n  }\n}\n")),(0,l.kt)("h3",{id:"\u5176\u4ed6\u8d44\u6e90"},"\u5176\u4ed6\u8d44\u6e90"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-forkJoin"},"forkJoin")," \ud83d\udcf0 - \u5b98\u65b9\u6587\u6863")),(0,l.kt)("hr",null),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\ud83d\udcc1 \u6e90\u7801:  ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/ReactiveX/rxjs/blob/master/src/observable/ForkJoinObservable.ts"},"https://github.com/ReactiveX/rxjs/blob/master/src/observable/ForkJoinObservable.ts"))))}m.isMDXComponent=!0}}]);